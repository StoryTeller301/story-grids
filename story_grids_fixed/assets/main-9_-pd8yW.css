:root{--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 12px;--spacing-lg: 20px;--spacing-xl: 32px;--border-radius-sm: 6px;--border-radius-md: 10px;--border-radius-lg: 12px;--transition-normal: .2s ease;--shadow-sm: 0 1px 3px rgba(0, 0, 0, .2);--shadow-md: 0 2px 8px rgba(0, 0, 0, .2);--shadow-lg: 0 4px 20px rgba(0, 0, 0, .3);--card-bg: var(--surface-color);--input-bg: var(--surface-color-light);--accent-color: #4285f4;--text-primary: var(--text-color);--text-secondary: var(--text-color-secondary);--text-on-accent: white;--border-color-focus: var(--accent-color)}.app{min-height:100vh;display:flex;flex-direction:column}.app-header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);background-color:var(--surface-color);border-bottom:1px solid var(--border-color)}.app-layout{flex:1;display:flex;flex-direction:column}.app-main{flex:1;padding:var(--spacing-lg);max-width:1400px;margin:0 auto;width:100%}.app-footer{padding:var(--spacing-md) var(--spacing-lg);background-color:var(--surface-color);border-top:1px solid var(--border-color);text-align:center;font-size:.9rem;color:var(--text-secondary)}.mode-selector{display:flex;gap:var(--spacing-md);margin-bottom:var(--spacing-lg);flex-wrap:wrap}.mode-button{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background-color:var(--card-bg);border:1px solid var(--border-color);border-radius:var(--border-radius-md);color:var(--text-primary);font-weight:500;cursor:pointer;transition:all var(--transition-normal)}.mode-button:hover{background:linear-gradient(to right,#4d7cfe1a,#00d9881a);transform:translateY(-2px)}.mode-button.active{background-color:var(--accent-color);color:var(--text-on-accent);border-color:var(--accent-color)}.mode-button svg{width:18px;height:18px}.logo-container{display:flex;align-items:center;gap:var(--spacing-sm)}.app-logo{width:32px;height:32px}.app-title{font-size:1.5rem;font-weight:700;color:var(--text-primary);margin:0}.header-controls{display:flex;align-items:center;gap:var(--spacing-md)}.theme-toggle{background:none;border:none;font-size:1.2rem;cursor:pointer;padding:var(--spacing-xs);border-radius:50%;transition:all var(--transition-normal)}.theme-toggle:hover{background-color:#ffffff1a}.action-button{padding:var(--spacing-sm) var(--spacing-md);border:none;border-radius:var(--border-radius-md);font-weight:500;cursor:pointer;transition:all var(--transition-normal)}.action-button:hover{transform:translateY(-2px)}.action-button.save{background-color:#4285f4;color:#fff}.action-button.save:hover{background-color:#3a6ae0}.action-button.export{background-color:#9747ff;color:#fff}.action-button.export:hover{background-color:#8a3bff}.action-button.reset{background-color:#ff5d7e;color:#fff}.action-button.reset:hover{background-color:#e54d6b}@media (max-width: 768px){.app-header{flex-direction:column;gap:var(--spacing-md);padding:var(--spacing-md)}.app-main{padding:var(--spacing-md)}.mode-selector{justify-content:center}}.narrative-grid-editor{font-family:Arial,sans-serif;max-width:100%;overflow-x:auto;padding:20px}.grid-header{display:flex;flex-direction:column;gap:15px;margin-bottom:20px}.grid-title-section{display:flex;gap:20px;flex-wrap:wrap}.grid-input-group{display:flex;flex-direction:column;min-width:200px}.grid-input-group label{font-weight:700;margin-bottom:5px}.grid-title-input,.grid-author-input{padding:8px;border:1px solid #ccc;border-radius:4px;font-size:16px}.grid-action-buttons{display:flex;flex-wrap:wrap;gap:10px}.grid-action-button{padding:8px 12px;border:none;border-radius:4px;background-color:#4a90e2;color:#fff;cursor:pointer;font-weight:700;transition:background-color .2s}.grid-action-button:hover{background-color:#357abd}.grid-action-button.save{background-color:#4caf50}.grid-action-button.save:hover{background-color:#3e8e41}.grid-action-button.load{background-color:#2196f3}.grid-action-button.load:hover{background-color:#0b7dda}.grid-action-button.import{background-color:#ff9800}.grid-action-button.import:hover{background-color:#e68a00}.grid-action-button.export{background-color:#9c27b0}.grid-action-button.export:hover{background-color:#7b1fa2}.grid-action-button.reset{background-color:#f44336}.grid-action-button.reset:hover{background-color:#d32f2f}.grid-action-button.columns{background-color:#607d8b}.grid-action-button.columns:hover{background-color:#455a64}.narrative-grid-container{overflow-x:auto;margin-bottom:20px}.narrative-grid{border-collapse:collapse;width:100%}.narrative-grid th,.narrative-grid td{border:1px solid #ddd;padding:8px;vertical-align:top}.narrative-grid th{background-color:#f2f2f2;text-align:left;font-weight:700;position:sticky;top:0;z-index:10}.grid-cell-content{width:100%;min-width:150px;min-height:80px;resize:vertical;border:none;padding:5px;font-family:inherit;font-size:14px}.grid-row-actions{display:flex;align-items:center;gap:10px}.grid-row-handle{cursor:grab;font-size:18px;color:#888}.grid-row-delete{background:none;border:none;cursor:pointer;font-size:16px;padding:0}.add-row-button{padding:10px 15px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:700;margin-top:10px}.add-row-button:hover{background-color:#3e8e41}.column-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.column-modal-content{background-color:#fff;border-radius:8px;padding:20px;width:90%;max-width:600px;max-height:80vh;overflow-y:auto}.column-modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.column-modal-title{margin:0;font-size:20px}.column-modal-close{background:none;border:none;font-size:24px;cursor:pointer;padding:0}.column-list{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.column-item{display:flex;align-items:center;gap:10px;padding:8px;border:1px solid #ddd;border-radius:4px;background-color:#f9f9f9}.column-handle{cursor:grab;font-size:18px;color:#888}.column-input{flex:1;padding:8px;border:1px solid #ccc;border-radius:4px}.column-delete{background:none;border:none;cursor:pointer;font-size:18px;padding:0}.add-column-button{padding:8px 12px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:700;margin-bottom:20px}.add-column-button:hover{background-color:#3e8e41}.column-modal-actions{display:flex;justify-content:flex-end;gap:10px}.column-modal-button{padding:8px 15px;border:none;border-radius:4px;cursor:pointer;font-weight:700}.column-modal-button.cancel{background-color:#f44336;color:#fff}.column-modal-button.cancel:hover{background-color:#d32f2f}.column-modal-button.save{background-color:#4caf50;color:#fff}.column-modal-button.save:hover{background-color:#3e8e41}.grid-row-dragging{opacity:.5}.grid-name-input-container{margin-bottom:20px}.grid-name-input-container label{display:block;font-weight:700;margin-bottom:5px}.grid-name-input{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;font-size:16px}.saved-grids-list{margin-bottom:20px}.saved-grids-list h4{margin-top:0;margin-bottom:10px}.grids-list{max-height:300px;overflow-y:auto;border:1px solid #ddd;border-radius:4px}.grid-list-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-bottom:1px solid #eee;cursor:pointer}.grid-list-item:last-child{border-bottom:none}.grid-list-item:hover{background-color:#f5f5f5}.grid-list-item.selected{background-color:#e3f2fd}.grid-name{flex:1}.grid-delete{background:none;border:none;cursor:pointer;font-size:16px;padding:0}.no-grids-message{padding:20px;text-align:center;color:#666;font-style:italic}.column-modal-button:disabled{background-color:#ccc;cursor:not-allowed}.ai-settings-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.ai-settings-content{background-color:#fff;border-radius:8px;padding:20px;width:90%;max-width:600px;max-height:80vh;overflow-y:auto;box-shadow:0 4px 8px #0003}.ai-settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;border-bottom:1px solid #eee;padding-bottom:10px}.ai-settings-header h3{margin:0;font-size:20px;color:#333}.ai-settings-close{background:none;border:none;font-size:24px;cursor:pointer;padding:0;color:#666}.ai-settings-body{margin-bottom:20px}.ai-settings-info{margin-bottom:15px;color:#555;line-height:1.5}.ai-settings-input-group{margin-bottom:15px}.ai-settings-input-group label{display:block;font-weight:700;margin-bottom:5px;color:#333}.api-key-input-container{display:flex;gap:10px}.api-key-input{flex:1;padding:10px;border:1px solid #ccc;border-radius:4px;font-size:16px;font-family:monospace}.toggle-key-visibility{padding:0 15px;background-color:#f0f0f0;border:1px solid #ccc;border-radius:4px;cursor:pointer;font-size:14px}.api-key-instructions{background-color:#f9f9f9;border:1px solid #eee;border-radius:4px;padding:15px;margin-top:15px}.api-key-instructions h4{margin-top:0;margin-bottom:10px;color:#333}.api-key-instructions ol{margin:0;padding-left:20px;line-height:1.6}.api-key-instructions a{color:#2196f3;text-decoration:none}.api-key-instructions a:hover{text-decoration:underline}.api-key-note{margin-top:10px;font-style:italic;color:#666}.ai-settings-footer{display:flex;justify-content:flex-end;gap:10px;border-top:1px solid #eee;padding-top:15px}.ai-settings-button{padding:8px 15px;border:none;border-radius:4px;cursor:pointer;font-weight:700}.ai-settings-button.cancel{background-color:#f5f5f5;color:#333}.ai-settings-button.save{background-color:#4caf50;color:#fff}.ai-settings-button.cancel:hover{background-color:#e0e0e0}.ai-settings-button.save:hover{background-color:#3e8e41}.ai-assist-container{display:flex;flex-direction:column;align-items:center;margin-top:5px}.ai-assist-button{background-color:#6200ea;color:#fff;border:none;border-radius:4px;padding:4px 8px;font-size:12px;cursor:pointer;transition:background-color .2s;display:flex;align-items:center;justify-content:center;width:80px}.ai-assist-button:hover{background-color:#5000d6}.ai-assist-button.loading{background-color:#9d46ff;cursor:wait}.ai-error-message{color:#d32f2f;font-size:12px;margin-top:5px;text-align:center;max-width:150px}.ai-settings-trigger{background-color:#6200ea;color:#fff;border:none;border-radius:4px;padding:8px 12px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:5px;margin-left:10px}.ai-settings-trigger:hover{background-color:#5000d6}.ai-icon{font-size:16px}.snowflake-method-container{max-width:1200px;margin:0 auto;padding:20px;color:var(--text-color)}.snowflake-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.snowflake-header h2{margin:0;font-size:24px;font-weight:600}.snowflake-actions{display:flex;gap:10px}.snowflake-button{padding:8px 16px;border:none;border-radius:10px;cursor:pointer;font-weight:500;transition:all .2s ease}.snowflake-button:hover{transform:translateY(-2px)}.snowflake-button.save{background-color:#4285f4;color:#fff}.snowflake-button.save:hover{background-color:#3a6ae0}.snowflake-button.export{background-color:#9747ff;color:#fff}.snowflake-button.export:hover{background-color:#8a3bff}.snowflake-button.reset{background-color:#ff5d7e;color:#fff}.snowflake-button.reset:hover{background-color:#e54d6b}.snowflake-description{margin-bottom:20px;font-size:14px;line-height:1.5}.progress-bar-container{height:8px;background-color:#333;border-radius:4px;margin-bottom:20px;overflow:hidden}.progress-bar{height:100%;background-color:#4285f4;transition:width .3s ease}.breadcrumb-nav{display:flex;flex-wrap:wrap;margin-bottom:20px;align-items:center;padding:10px;background-color:var(--surface-color);border-radius:10px;border:1px solid var(--border-color)}.breadcrumb-item{padding:6px 10px;border-radius:8px;cursor:pointer;font-size:14px;transition:all .2s ease}.breadcrumb-item:hover{background-color:#4285f41a}.breadcrumb-item.active{background-color:#4285f433;font-weight:500;color:var(--primary-color)}.breadcrumb-separator{margin:0 5px;color:#666}.snowflake-content{background-color:var(--surface-color);border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 2px 8px #0003}.step-title{display:flex;align-items:center;margin-top:0;margin-bottom:15px;font-size:18px;font-weight:500}.step-number{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background-color:#4285f4;color:#fff;border-radius:50%;margin-right:12px;font-size:16px;font-weight:500}.example-box{background-color:var(--surface-color-light);border-left:4px solid #4285f4;padding:12px 16px;margin-bottom:16px;font-size:13px;border-radius:0 8px 8px 0}.example-box p{margin:0}.example-box strong{color:#4285f4}.field-container{margin-bottom:18px}.field-container label{display:block;margin-bottom:8px;font-weight:500;color:#4285f4;font-size:14px}.snowflake-textarea{width:100%;min-height:80px;padding:12px;border:none;border-radius:8px;background-color:var(--surface-color-light);color:var(--text-color);font-size:14px;resize:vertical;transition:box-shadow .2s ease}.snowflake-textarea:focus{outline:none;box-shadow:0 0 0 2px #4285f466}.snowflake-textarea.large{min-height:150px}.navigation-buttons{display:flex;justify-content:space-between;margin-top:24px}.nav-button{padding:10px 18px;background-color:#4285f4;color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:500;transition:all .2s ease;display:flex;align-items:center;gap:8px}.nav-button:hover{transform:translateY(-2px);background-color:#3a6ae0}.nav-button:disabled{background-color:#666;cursor:not-allowed;transform:none}.snowflake-footer{text-align:center;margin-top:30px;padding-top:15px;border-top:1px solid var(--border-color);font-size:12px;color:var(--text-color-secondary)}.character-management{display:flex;gap:24px;margin-top:20px}.character-list{width:30%;min-width:200px}.add-character-button{width:100%;padding:12px;background-color:#4285f4;color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:500;margin-bottom:12px;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.add-character-button:hover{transform:translateY(-2px);background-color:#3a6ae0}.character-tab{width:100%;padding:12px;background-color:var(--surface-color-light);border-radius:10px;margin-bottom:10px;cursor:pointer;transition:all .2s ease;box-shadow:0 1px 3px #0003}.character-tab:hover{transform:translateY(-2px)}.character-tab.active{background-color:#4285f4;color:#fff}.character-tab-content{display:flex;justify-content:space-between;align-items:center}.delete-character-button{background:none;border:none;color:#ff5d7e;font-size:18px;cursor:pointer;padding:0 5px;transition:all .2s ease}.delete-character-button:hover{color:#e54d6b;transform:scale(1.1)}.character-details{flex:1;background-color:var(--surface-color-light);border-radius:12px;padding:24px;box-shadow:0 2px 8px #0003}.character-details h4{margin-top:0;margin-bottom:18px;color:#4285f4;font-size:16px;font-weight:500}.character-field{margin-bottom:16px}.character-field label{display:block;margin-bottom:8px;font-weight:500;color:#4285f4;font-size:14px}.character-field input,.character-field textarea{width:100%;padding:12px;border:none;border-radius:8px;background-color:var(--surface-color);color:var(--text-color);font-size:14px;transition:box-shadow .2s ease}.character-field input:focus,.character-field textarea:focus{outline:none;box-shadow:0 0 0 2px #4285f466}.character-field textarea{min-height:80px;resize:vertical}.character-field.full-width textarea{min-height:300px}.add-scene-button{padding:12px 18px;background-color:#4285f4;color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:500;margin-bottom:20px;transition:all .2s ease;display:flex;align-items:center;gap:8px}.add-scene-button:hover{transform:translateY(-2px);background-color:#3a6ae0}.no-scenes-message{background-color:var(--surface-color-light);border-radius:10px;padding:24px;text-align:center;color:var(--text-color-secondary)}.scenes-list{display:flex;flex-direction:column;gap:16px}.scene-item{background-color:var(--surface-color-light);border-radius:12px;padding:20px;box-shadow:0 1px 3px #0003;transition:all .2s ease}.scene-item:hover{transform:translateY(-2px)}.scene-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.scene-header h4{margin:0;color:#4285f4;font-size:16px;font-weight:500}.delete-scene-button{background-color:#ff5d7e;color:#fff;border:none;border-radius:8px;padding:6px 12px;cursor:pointer;font-size:12px;transition:all .2s ease}.delete-scene-button:hover{background-color:#e54d6b;transform:translateY(-2px)}.scene-fields{display:grid;grid-template-columns:1fr 1fr;gap:16px}.scene-field{margin-bottom:12px}.scene-field label{display:block;margin-bottom:8px;font-weight:500;color:#4285f4;font-size:14px}.scene-field input,.scene-field textarea{width:100%;padding:12px;border:none;border-radius:8px;background-color:var(--surface-color);color:var(--text-color);font-size:14px;transition:box-shadow .2s ease}.scene-field input:focus,.scene-field textarea:focus{outline:none;box-shadow:0 0 0 2px #4285f466}.scene-field textarea{min-height:80px;resize:vertical}.congratulations-message{background-color:var(--surface-color-light);border-radius:12px;padding:24px;margin-top:24px;text-align:center;border-left:4px solid #34a853}.congratulations-message h4{color:#34a853;margin-top:0;font-size:18px;margin-bottom:12px}@media (max-width: 768px){.character-management{flex-direction:column}.character-list{width:100%}.scene-fields{grid-template-columns:1fr}.snowflake-header{flex-direction:column;align-items:flex-start;gap:16px}.snowflake-actions{width:100%;justify-content:space-between}}:root{--primary-color: #4285f4;--secondary-color: #34a853;--danger-color: #ea4335;--warning-color: #fbbc05;--background-color: #121212;--surface-color: #1e1e1e;--surface-color-light: #2a2a2a;--text-color: #ffffff;--text-color-secondary: #b0b0b0;--border-color: #333333;--shadow-color: rgba(0, 0, 0, .3);font-family:Inter,system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:dark;color:var(--text-color);background-color:var(--background-color);font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-theme=light]{--background-color: #f5f5f5;--surface-color: #ffffff;--surface-color-light: #f0f0f0;--text-color: #333333;--text-color-secondary: #666666;--border-color: #dddddd;--shadow-color: rgba(0, 0, 0, .1);color-scheme:light}*{box-sizing:border-box;margin:0;padding:0}body{margin:0;min-width:320px;min-height:100vh}manus-content-root,.footer-btn,[data-manus-editor=true],[class*=manus-editor],[id*=manus-editor]{display:none!important;visibility:hidden!important;opacity:0!important;pointer-events:none!important;position:absolute!important;width:0!important;height:0!important;overflow:hidden!important}.auth-container{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}.auth-box{background-color:var(--surface-color);border-radius:8px;padding:30px;width:100%;max-width:400px;box-shadow:0 4px 12px var(--shadow-color)}.centered-logo{display:flex;flex-direction:column;align-items:center;margin-bottom:30px}.passkey-form{display:flex;flex-direction:column;gap:15px}.passkey-input{padding:12px;border:1px solid var(--border-color);border-radius:4px;background-color:var(--surface-color-light);color:var(--text-color);font-size:16px;width:100%;height:45px}.passkey-form .action-button{padding:12px;height:45px;font-size:16px}
